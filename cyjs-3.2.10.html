<DOCTYPE html>
<html>

  <head>
    <title>Cytoscape.js 3.2.10</title>

    <style>
      html, body { margin: 0; padding: 0; font: 12pt helvetica neue, helvetica, liberation sans, sans-serif; line-height: 1; }
      h1 { pointer-events: none; font-weight: normal; font-size: 1em; margin: 0.5em; color: #888; }
      .header{background: white;position:relative; z-index: 5;}
      select,span {position:relative; z-index: 10; margin: 0.5em; }
      #cy { position: absolute; left: 0; right: 0; top: 53px; bottom: 0; }
    </style>

    <script src="bluebird.min.js"></script>
    <script src="fetch.js"></script>
    <script src="cytoscape-3.2.10.min.js"></script>
		<script src="http://code.jquery.com/jquery-2.1.1.min.js"></script>

    <script src="./arbor.js"></script>
    <script src="https://unpkg.com/cytoscape-arbor/cytoscape-arbor.js"> </script>

		<script src="https://unpkg.com/webcola/WebCola/cola.min.js"></script>
    <script src="https://unpkg.com/cytoscape-cola/cytoscape-cola.js"> </script>

    <script src="https://unpkg.com/cytoscape-cose-bilkent/cytoscape-cose-bilkent.js"> </script>

    <script src="https://unpkg.com/dagre@0.7.4/dist/dagre.js"></script>
    <script src="https://unpkg.com/cytoscape-dagre/cytoscape-dagre.js"> </script>
    
    <script src="https://unpkg.com/cytoscape-euler/cytoscape-euler.js"> </script>

    <script src="https://unpkg.com/klayjs@0.4.1/klay.js"></script>
    <script src="https://unpkg.com/cytoscape-klay/cytoscape-klay.js"> </script>

		<script src="https://unpkg.com/weaverjs@1.2.0/dist/weaver.min.js"></script>
    <script src="https://unpkg.com/cytoscape-spread/cytoscape-spread.js"></script>
  
    <script src="https://cdn.rawgit.com/dhotson/springy/2.7.1/springy.js"></script>
    <script src="https://unpkg.com/cytoscape-springy/cytoscape-springy.js"></script>
    
    <script>
      var getGraph = function(){
        var file = './1677336797128292_MOESM10_ESM_child_child.json';
        return fetch( file ).then(function( response ){
          return response.json();
        }).then(function( json ){
          return json.elements;
        });
      };

      window.addEventListener('DOMContentLoaded', function(){
        var cy = window.cy = cytoscape({
          container: document.getElementById('cy'),
          layout: {
            name: 'preset',
          },
          elements: getGraph(),
          style: [
            {
              selector: "node",
              style: {
                "label": "data(label)",
                "background-color": "#aaa"
              }
            },
            {
              selector: "edge",
              style: {
                "opacity": 0.2,
                "line-color": "#ccc",
                "width": 3
              }
            }
          ]
        });
      });

      function layoutChange() {
          const layoutType = document.getElementById("layout").value;
          let layout = cy.layout({
            name: layoutType
          });
          let timeTaken,timeBefore;
          document.getElementById("info").innerHTML = "Applying layout";
          cy.on('layoutstop', () => {
            timeTaken=performance.now()-timeBefore;
            document.getElementById("info").innerHTML = "Time taken to apply layout: " + timeTaken +" ms";
          });
          timeBefore = performance.now();
          layout.run();
        }

        function networkChange() {
          const networkType = document.getElementById("network").value;
          cy.remove(cy.elements());
          return fetch( networkType ).then(function( response ){
          return response.json();
        }).then(function( json ){
           cy.add(json.elements);
           layoutChange();
        });
        }
    </script>
  </head>

  <body>
    <div class="header">
      <h1> Cytoscape.js 3.2.10</h1>
      <span>Network</span>
      <select id="network" onchange="networkChange()">
        <option value="./1677336797128292_MOESM10_ESM_child_child.json">6,000</option>
        <option value="./NB_selected_edges_2_10000.json">10,000</option>
        <option value="./NB_selected_edges_2_20000.json">20,000</option>
      </select>
      <span>Layout</span>
      <select id="layout" onchange="layoutChange()">
        <option value="preset">preset</option>
        <option value="null">null</option>
        <option value="random">random</option>
        <option value="grid">grid</option>
        <option value="circle">circle</option>
        <option value="concentric">concentric</option>
        <option value="breadthfirst">breadthfirst</option>
        <option value="cose">cose</option>
        <option value="arbor">arbor</option>
        <option value="cola">cola</option>
        <option value="cose-bilkent">cose-bilkent</option>
        <option value="dagre">dagre</option>
        <option value="euler">euler</option>
        <option value="klay">klay</option>
        <option value="spread">spread</option>
        <option value="springy">springy</option>
      </select>
      <span id="info">Change a setting to view preformance</span>
    </div>
    <div id="cy"></div>
  </body>

</html>
